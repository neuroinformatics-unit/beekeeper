
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Contributing to beekeeping &#8212; beekeeping</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=8f2a1f02" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="_static/documentation_options.js?v=1e28cc32"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'contributing';</script>
    <link rel="canonical" href="https://SainsburyWellcomeCentre.github.io/beekeeping/contributing.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="beekeeping 🐝" href="index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
  
    <p class="title logo__title">beekeeping v0.3.4</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="#">
    Contributing to beekeeping
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/neuroinformatics-unit/beekeeping" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="#">
    Contributing to beekeeping
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/neuroinformatics-unit/beekeeping" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"></div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Contributing to <code class="docutils literal notranslate"><span class="pre">beekeeping</span></code></span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="contributing-to-beekeeping">
<h1>Contributing to <code class="docutils literal notranslate"><span class="pre">beekeeping</span></code><a class="headerlink" href="#contributing-to-beekeeping" title="Link to this heading">#</a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">#</a></h2>
<p><strong>Contributors to <code class="docutils literal notranslate"><span class="pre">beekeeping</span></code> are absolutely encouraged</strong>, whether to fix a bug, develop a new feature, or improve the documentation.
If you’re unsure about any part of the contributing process, please get in touch. It’s best to reach out in public, e.g. by opening an issue so that others can benefit from the discussion.</p>
</section>
<section id="contributing-code">
<h2>Contributing code<a class="headerlink" href="#contributing-code" title="Link to this heading">#</a></h2>
<section id="creating-a-development-environment">
<h3>Creating a development environment<a class="headerlink" href="#creating-a-development-environment" title="Link to this heading">#</a></h3>
<p>It is recommended to use <a class="reference external" href="https://docs.conda.io/en/latest/">conda</a> to install a development environment for
<code class="docutils literal notranslate"><span class="pre">beekeeping</span></code>. Once you have <code class="docutils literal notranslate"><span class="pre">conda</span></code> installed, create and activate a <code class="docutils literal notranslate"><span class="pre">conda</span></code> environment for development with the following commands:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>create<span class="w"> </span>-n<span class="w"> </span>beekeeping-dev<span class="w"> </span>-c<span class="w"> </span>conda-forge<span class="w"> </span><span class="nv">python</span><span class="o">=</span><span class="m">3</span>.12
conda<span class="w"> </span>activate<span class="w"> </span>beekeeping-dev
</pre></div>
</div>
<p>To install the development version of <code class="docutils literal notranslate"><span class="pre">beekeeping</span></code>, clone the GitHub repository, and then run from the root of the repository:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;.[dev]&#39;</span>
</pre></div>
</div>
<p>This will install the package with all the development dependencies.</p>
</section>
<section id="development-workflow">
<h3>Development workflow<a class="headerlink" href="#development-workflow" title="Link to this heading">#</a></h3>
<p>We follow the <a class="reference external" href="https://docs.github.com/en/get-started/using-github/github-flow">GitHub flow</a>:</p>
<ol class="arabic">
<li><p>Create a <a class="reference external" href="https://docs.github.com/en/get-started/exploring-projects-on-github/contributing-to-a-project">fork</a> of the <code class="docutils literal notranslate"><span class="pre">beekeeping</span></code> repository.</p></li>
<li><p>Clone the forked repository to your local machine and change directories</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">your</span><span class="o">-</span><span class="n">username</span><span class="o">/</span><span class="n">beekeeping</span><span class="o">.</span><span class="n">git</span>
<span class="n">cd</span> <span class="n">beekeeping</span>
</pre></div>
</div>
</li>
<li><p>Set the upstream remote to the base <code class="docutils literal notranslate"><span class="pre">beekeeping</span></code> repository:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">remote</span> <span class="n">add</span> <span class="n">upstream</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">neuroinformatics</span><span class="o">-</span><span class="n">unit</span><span class="o">/</span><span class="n">beekeeping</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
</li>
<li><p>If you haven’t already, create a development environment and install the <code class="docutils literal notranslate"><span class="pre">beekeeping</span></code> package in development mode (see <a class="reference internal" href="#creating-a-development-environment">creating a development environment</a>).</p></li>
<li><p>We use <a class="reference external" href="https://pre-commit.com/">pre-commit hooks</a> to ensure a consistent formatting style. They are defined in the <code class="docutils literal notranslate"><span class="pre">.pre-commit-config.yaml</span></code> file. Install the pre-commit hooks by running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pre</span><span class="o">-</span><span class="n">commit</span> <span class="n">install</span>
</pre></div>
</div>
<p>Upon committing, the hooks will run and try to automatically format the code according to the predefined rules. If a problem cannot be auto-fixed, the corresponding tool will provide
information on what the issue is and how to fix it. Please ensure all hooks pass before committing.</p>
</li>
<li><p>Now create a new branch in your fork, edit the code or documentation, and commit your changes.</p></li>
<li><p>Submit your changes via a pull request, following the <a class="reference internal" href="#pull-requests">pull requests</a> guidelines.</p></li>
</ol>
<p>These guidelines are based on the <a class="reference external" href="https://napari.org/dev/developers/contributing/dev_install.html#dev-installation">napari guide</a>.</p>
</section>
</section>
<section id="development-guidelines">
<h2>Development guidelines<a class="headerlink" href="#development-guidelines" title="Link to this heading">#</a></h2>
<section id="pull-requests">
<h3>Pull requests<a class="headerlink" href="#pull-requests" title="Link to this heading">#</a></h3>
<p>In all cases, please submit code to the main repository via a pull request. We adhere to the following conventions:</p>
<ul class="simple">
<li><p>Please submit <em>draft</em> pull requests as early as possible to allow for discussion.</p></li>
<li><p>One approval of a PR (by a repo owner) is enough for it to be merged.</p></li>
<li><p>Unless someone approves the PR with optional comments, the PR is immediately merged by the approving reviewer.</p></li>
<li><p>Ask for a review from someone specific if you think they would be a particularly suited reviewer</p></li>
</ul>
</section>
<section id="testing">
<h3>Testing<a class="headerlink" href="#testing" title="Link to this heading">#</a></h3>
<p>We use <a class="reference external" href="https://docs.pytest.org/en/latest/">pytest</a> for testing, and our integration tests require Google chrome or chromium and a compatible <code class="docutils literal notranslate"><span class="pre">chromedriver</span></code>.
Please try to ensure that all functions are tested, including both unit and integration tests.
Write your test methods and classes in the <code class="docutils literal notranslate"><span class="pre">test</span></code> folder.</p>
<section id="integration-tests-with-chrome">
<h4>Integration tests with chrome<a class="headerlink" href="#integration-tests-with-chrome" title="Link to this heading">#</a></h4>
<p>The integration tests start a server and browse with chrome(ium),
so you will need to download and install Google chrome or chromium (if you don’t already use one of them).
You will then need to download a <a class="reference external" href="https://chromedriver.chromium.org/downloads">compatible version of <code class="docutils literal notranslate"><span class="pre">chromedriver</span></code></a>.
Depending on your OS you may also need to <em><strong>trust</strong></em> the executable.</p>
<details>
<summary>Ubuntu</summary>
<p>Installing chromium and chromedriver is a one-liner (tested in Ubuntu 20.04 and 22.04).</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>chromium-chromedriver
pytest<span class="w"> </span><span class="c1"># in the root of the repository</span>
</pre></div>
</div>
</details>
<details>
<summary>MacOS</summary>
There is also a [homebrew cask](https://formulae.brew.sh/cask/chromedriver) for `chromedriver` so instead of going to the web and downloading you should be able to:
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>brew<span class="w"> </span>install<span class="w"> </span>chromedriver
brew<span class="w"> </span>info<span class="w"> </span>chromedriver
</pre></div>
</div>
<p>And take note of the installation path.
(It’s probably something like <code class="docutils literal notranslate"><span class="pre">/opt/homebrew/Caskroom/chromedriver/&lt;version&gt;</span></code>).</p>
<p>However you obtained <code class="docutils literal notranslate"><span class="pre">chomedriver</span></code>, you can trust the executable via the security settings and/or keychain GUI or just:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/place/where/your/chromedriver/is
xattr<span class="w"> </span>-d<span class="w"> </span>com.apple.quarantine<span class="w"> </span>chromedriver
</pre></div>
</div>
<p>Once downloaded, make sure the <code class="docutils literal notranslate"><span class="pre">chromedriver</span></code> binary in your <code class="docutils literal notranslate"><span class="pre">PATH</span></code> and check that you can run the integration tests.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/place/where/your/chromedriver/is/chromedriver
pytest<span class="w"> </span><span class="c1"># in the root of the repository</span>
</pre></div>
</div>
</details>
<details>
<summary>Windows</summary>
<p>For Windows, be sure to download the <code class="docutils literal notranslate"><span class="pre">chromedriver_win32.zip</span></code> file, extract the executable, and it’s probably easiest to simply place it in the directory where you want to run <code class="docutils literal notranslate"><span class="pre">pytest</span></code>.</p>
</details>
<p>It’s a good idea to test locally before pushing. Pytest will run all tests and also report test coverage.</p>
</section>
</section>
<section id="continuous-integration">
<h3>Continuous integration<a class="headerlink" href="#continuous-integration" title="Link to this heading">#</a></h3>
<p>All pushes and pull requests will be built by <a class="reference external" href="https://docs.github.com/en/actions">GitHub actions</a>. This will usually include linting, testing and deployment.</p>
<p>A GitHub actions workflow (<code class="docutils literal notranslate"><span class="pre">.github/workflows/test_and_deploy.yml</span></code>) has been set up to run (on each commit/PR):</p>
<ul class="simple">
<li><p>Linting checks (pre-commit).</p></li>
<li><p>Testing (only if linting checks pass)</p></li>
<li><p>Release to PyPI (only if a git tag is present and if tests pass). Requires <code class="docutils literal notranslate"><span class="pre">TWINE_API_KEY</span></code> from PyPI to be set in repository secrets.</p></li>
</ul>
</section>
<section id="versioning-and-releases">
<h3>Versioning and releases<a class="headerlink" href="#versioning-and-releases" title="Link to this heading">#</a></h3>
<p>We use <a class="reference external" href="https://semver.org/">semantic versioning</a>, which includes <code class="docutils literal notranslate"><span class="pre">MAJOR</span></code>.<code class="docutils literal notranslate"><span class="pre">MINOR</span></code>.<code class="docutils literal notranslate"><span class="pre">PATCH</span></code> version numbers:</p>
<ul class="simple">
<li><p>PATCH = small bugfix</p></li>
<li><p>MINOR = new feature</p></li>
<li><p>MAJOR = breaking change</p></li>
</ul>
<p>We use <a class="reference external" href="https://github.com/pypa/setuptools_scm"><code class="docutils literal notranslate"><span class="pre">setuptools_scm</span></code></a> to automatically version <code class="docutils literal notranslate"><span class="pre">beekeeping</span></code>. It has been pre-configured in the <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file. <code class="docutils literal notranslate"><span class="pre">setuptools_scm</span></code> will automatically infer the version using git. To manually set a new semantic version, create a tag and make sure the tag is pushed to GitHub. Make sure you commit any changes you wish to be included in this version. E.g. to bump the version to <code class="docutils literal notranslate"><span class="pre">1.0.0</span></code>:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>add<span class="w"> </span>.
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Add new changes&quot;</span>
git<span class="w"> </span>tag<span class="w"> </span>-a<span class="w"> </span>v1.0.0<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Bump to version 1.0.0&quot;</span>
git<span class="w"> </span>push<span class="w"> </span>--follow-tags
</pre></div>
</div>
<p>Pushing a tag to GitHub triggers the package’s deployment to PyPI. The version number is automatically determined from the latest tag on the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch.</p>
</section>
</section>
<section id="contributing-documentation">
<h2>Contributing documentation<a class="headerlink" href="#contributing-documentation" title="Link to this heading">#</a></h2>
<p>The documentation is hosted via <a class="reference external" href="https://pages.github.com/">GitHub pages</a> at <a class="reference external" href="https://beekeeping.neuroinformatics.dev/">beekeeping.neuroinformatics.dev</a>. Its source files are located in the <code class="docutils literal notranslate"><span class="pre">docs</span></code> folder of this repository.</p>
<p>Source files are written in either <a class="reference external" href="https://docutils.sourceforge.io/rst.html">reStructuredText</a> or <a class="reference external" href="https://myst-parser.readthedocs.io/en/stable/syntax/typography.html">markdown</a>.
The <code class="docutils literal notranslate"><span class="pre">index.rst</span></code> file corresponds to the main page of the documentation website. Other <code class="docutils literal notranslate"><span class="pre">.rst</span></code>  or <code class="docutils literal notranslate"><span class="pre">.md</span></code> files are included in the main page via the <code class="docutils literal notranslate"><span class="pre">toctree</span></code> directive.</p>
<p>We use <a class="reference external" href="https://www.sphinx-doc.org/en/master/">Sphinx</a> and the <a class="reference external" href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> to build the source files into html output. This is handled by a GitHub actions workflow (<code class="docutils literal notranslate"><span class="pre">.github/workflows/publish_docs.yml</span></code>) which is triggered whenever changes are pushed to the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch. The workflow builds the html output files and sends them to a <code class="docutils literal notranslate"><span class="pre">gh-pages</span></code> branch.</p>
<section id="editing-the-documentation">
<h3>Editing the documentation<a class="headerlink" href="#editing-the-documentation" title="Link to this heading">#</a></h3>
<p>To edit the documentation (<code class="docutils literal notranslate"><span class="pre">.md</span></code> or <code class="docutils literal notranslate"><span class="pre">.rst</span></code> in the <code class="docutils literal notranslate"><span class="pre">docs</span></code> folder), first follow the usual <a class="reference internal" href="#development-workflow">development workflow</a> steps.</p>
<p>If you create a new documentation source file (e.g. <code class="docutils literal notranslate"><span class="pre">my_new_file.md</span></code> or <code class="docutils literal notranslate"><span class="pre">my_new_file.rst</span></code>), you will need to add it to the <code class="docutils literal notranslate"><span class="pre">toctree</span></code> directive in <code class="docutils literal notranslate"><span class="pre">index.rst</span></code> for it to be included in the documentation website:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">toctree</span><span class="p">::</span>
   <span class="nc">:maxdepth:</span> 2

   existing_file
   my_new_file
</pre></div>
</div>
</section>
<section id="building-the-documentation-locally">
<h3>Building the documentation locally<a class="headerlink" href="#building-the-documentation-locally" title="Link to this heading">#</a></h3>
<p>We recommend that you build and view the documentation website locally, before you push it.
To do so, first install the requirements for building the documentation:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>docs/requirements.txt
</pre></div>
</div>
<p>Then, from the root of the repository, run:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sphinx-build<span class="w"> </span>docs/source<span class="w"> </span>docs/build
</pre></div>
</div>
<p>You can view the local build by opening <code class="docutils literal notranslate"><span class="pre">docs/build/index.html</span></code> in a browser.
To refresh the documentation, after making changes, remove the <code class="docutils literal notranslate"><span class="pre">docs/build</span></code> folder and re-run the above command:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>rm<span class="w"> </span>-rf<span class="w"> </span>docs/build
sphinx-build<span class="w"> </span>docs/source<span class="w"> </span>docs/build
</pre></div>
</div>
</section>
</section>
<section id="overview-of-the-codebase">
<h2>Overview of the codebase<a class="headerlink" href="#overview-of-the-codebase" title="Link to this heading">#</a></h2>
<p><em>Generated by Claude</em></p>
<section id="architecture">
<h3>Architecture<a class="headerlink" href="#architecture" title="Link to this heading">#</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>beekeeping/
├── app.py              # Main Dash app initialization
├── pages/              # Page components
│   ├── home.py         # Upload interface
│   └── metadata.py     # Table interface
├── callbacks/          # Event handlers
│   ├── home.py         # Config upload logic
│   └── metadata.py     # Table operations
└── utils.py            # Data processing utilities
</pre></div>
</div>
</section>
<section id="key-components">
<h3>Key components<a class="headerlink" href="#key-components" title="Link to this heading">#</a></h3>
<section id="application-bootstrap-app-py">
<h4><strong>1. Application bootstrap (<code class="docutils literal notranslate"><span class="pre">app.py</span></code>)</strong><a class="headerlink" href="#application-bootstrap-app-py" title="Link to this heading">#</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Multi-page Dash app with Bootstrap theming</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Dash</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">use_pages</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">external_stylesheets</span><span class="o">=</span><span class="p">[</span><span class="n">dbc</span><span class="o">.</span><span class="n">themes</span><span class="o">.</span><span class="n">BOOTSTRAP</span><span class="p">])</span>

<span class="c1"># Fixed sidebar + dynamic content area layout</span>
<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span><span class="n">sidebar</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">storage</span><span class="p">])</span>

<span class="c1"># Register callbacks from modules</span>
<span class="n">home</span><span class="o">.</span><span class="n">get_callbacks</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
<span class="n">metadata</span><span class="o">.</span><span class="n">get_callbacks</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="session-storage-pattern">
<h4><strong>2. Session storage pattern</strong><a class="headerlink" href="#session-storage-pattern" title="Link to this heading">#</a></h4>
<ul>
<li><p><strong>Storage component</strong>: <code class="docutils literal notranslate"><span class="pre">dcc.Store(id=&quot;session-storage&quot;)</span></code> maintains state across pages</p></li>
<li><p><strong>Data structure</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;config&quot;</span><span class="p">:</span> <span class="p">{</span><span class="o">...</span><span class="p">},</span>           <span class="c1"># Project configuration</span>
    <span class="s2">&quot;metadata_fields&quot;</span><span class="p">:</span> <span class="p">{</span><span class="o">...</span><span class="p">}</span>   <span class="c1"># Field definitions and validation</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="callback-architecture">
<h4><strong>3. Callback architecture</strong><a class="headerlink" href="#callback-architecture" title="Link to this heading">#</a></h4>
<p><strong>Home page callbacks:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">save_input_config_to_storage()</span></code>: Processes uploaded YAML, loads metadata fields, stores in session</p></li>
</ul>
<p><strong>Metadata page callbacks:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">create_metadata_table_and_buttons()</span></code>: Builds table from YAML files or shows error</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">add_rows()</span></code>: Handles manual and automatic row addition</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">modify_rows_selection()</span></code>: Manages selection, editing, and export</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">generate_yaml_files_from_spreadsheet()</span></code>: Processes uploaded spreadsheets</p></li>
</ul>
</section>
</section>
<section id="data-flow">
<h3>Data flow<a class="headerlink" href="#data-flow" title="Link to this heading">#</a></h3>
<section id="configuration-loading">
<h4><strong>Configuration loading</strong><a class="headerlink" href="#configuration-loading" title="Link to this heading">#</a></h4>
<ol class="arabic simple">
<li><p>User uploads project_config.yaml</p></li>
<li><p>Callback parses YAML and reads metadata_fields.yaml</p></li>
<li><p>Data stored in session storage</p></li>
<li><p>Other callbacks access via app_storage parameter</p></li>
</ol>
</section>
<section id="metadata-table-generation">
<h4><strong>Metadata table generation</strong><a class="headerlink" href="#metadata-table-generation" title="Link to this heading">#</a></h4>
<ol class="arabic simple">
<li><p>utils.df_from_metadata_yaml_files() scans directory</p></li>
<li><p>Reads all *.metadata.yaml files</p></li>
<li><p>Creates pandas DataFrame</p></li>
<li><p>create_metadata_table_component_from_df() builds Dash table</p></li>
</ol>
</section>
<section id="yaml-export-process">
<h4><strong>YAML export process</strong><a class="headerlink" href="#yaml-export-process" title="Link to this heading">#</a></h4>
<ol class="arabic simple">
<li><p>User selects rows and clicks export</p></li>
<li><p>modify_rows_selection() callback triggers</p></li>
<li><p>utils.export_selected_rows_as_yaml() processes selection</p></li>
<li><p>Writes individual .metadata.yaml files to videos directory</p></li>
</ol>
</section>
</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><code class="docutils literal notranslate"><span class="pre">beekeeping</span></code> 🐝</p>
      </div>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#contributing-code">Contributing code</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-a-development-environment">Creating a development environment</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#development-workflow">Development workflow</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#development-guidelines">Development guidelines</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pull-requests">Pull requests</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#testing">Testing</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#integration-tests-with-chrome">Integration tests with chrome</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#continuous-integration">Continuous integration</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#versioning-and-releases">Versioning and releases</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#contributing-documentation">Contributing documentation</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#editing-the-documentation">Editing the documentation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#building-the-documentation-locally">Building the documentation locally</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview-of-the-codebase">Overview of the codebase</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#architecture">Architecture</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#key-components">Key components</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#application-bootstrap-app-py"><strong>1. Application bootstrap (<code class="docutils literal notranslate"><span class="pre">app.py</span></code>)</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#session-storage-pattern"><strong>2. Session storage pattern</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#callback-architecture"><strong>3. Callback architecture</strong></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data-flow">Data flow</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#configuration-loading"><strong>Configuration loading</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#metadata-table-generation"><strong>Metadata table generation</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#yaml-export-process"><strong>YAML export process</strong></a></li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/contributing.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2022, University College London (UCL).
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>